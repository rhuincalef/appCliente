#:kivy 1.0

# NOTA: La clase que hereda de App tiene que tener el mismo nombre que el layout del 
# archivo .kv.

#:import sist_op os

<SubirCapturasServidorScreen>:
	file_chooser: filechooser
	ruta_fs: ruta_en_fs

    GridLayout:
		id: layout_principal
		orientation: 'vertical'
		cols: 1
		rows: 4

		Label:
			id: titulo
			text: "Seleccione las fallas que desea subir al servidor"
			size_hint:(1,0.05)
			color: 0,0,0,1
			canvas.before:
				Color:
					rgba: 0,0.7,0, 1
				Rectangle:
					pos: self.pos
					size: self.size

		Label:
			id: ruta_en_fs
			text: sist_op.getcwd()
			size_hint:(1,0.05)
			color: 0,0,0,1
			canvas.before:
				Color:
					rgba: 0,0.7,0, 1
				Rectangle:
					pos: self.pos
					size: self.size
		
		FileChooserIconView:
		    id: filechooser
		    multiselect: True
		    size_hint:(1,0.7)

		    #Filtros para los archivos que se mostraran en el filechooser
		    filters: ['*.pcd','*.py']
			
			#dirselect: True
			canvas.before:
				Color:
					rgba: 0,0,0,1
				Rectangle:
					pos: self.pos
					size: self.size

			
		    #Cambio de directorio
		    on_entries_cleared: root.refrescar_directorio()
		    #1 tap sobre el archivo
		    #on_selection: root.select(filechooser.path, filechooser.selection)
		    

		    
	#Barra de opciones abajo
	GridLayout:
		id: layout_principal
		orientation: 'horizontal'
		cols: 3
		rows: 1
		size_hint:(1,0.05)
		
		Button:
        	id: bt_subir_archivos
        	text: "Seleccionar todo"
        	on_press: root.seleccionar_todo()
        
	    Button:
        	id: bt_subir_archivos
        	text: "Enviar capturas"
        	on_press: root.enviar_capturas()

        Button:	
        	id: bt_salir
        	on_press: root.volver()
        	text: "Volver"

